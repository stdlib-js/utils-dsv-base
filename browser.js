// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
var e,t;e=this,t=function(){"use strict";var e="function"==typeof Object.defineProperty?Object.defineProperty:null,t=Object.defineProperty;function i(e){return"number"==typeof e}function r(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function n(e,t,i){var n=!1,a=t-e.length;return a<0||(function(e){return"-"===e[0]}(e)&&(n=!0,e=e.substr(1)),e=i?e+r(a):r(a)+e,n&&(e="-"+e)),e}var a=String.prototype.toLowerCase,s=String.prototype.toUpperCase;function o(e){var t,r,o;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(r=e.arg,o=parseInt(r,10),!isFinite(o)){if(!i(r))throw new Error("invalid integer. Value: "+r);o=0}return o<0&&("u"===e.specifier||10!==t)&&(o=4294967295+o+1),o<0?(r=(-o).toString(t),e.precision&&(r=n(r,e.precision,e.padRight)),r="-"+r):(r=o.toString(t),o||e.precision?e.precision&&(r=n(r,e.precision,e.padRight)):r="",e.sign&&(r=e.sign+r)),16===t&&(e.alternate&&(r="0x"+r),r=e.specifier===s.call(e.specifier)?s.call(r):a.call(r)),8===t&&e.alternate&&"0"!==r.charAt(0)&&(r="0"+r),r}function c(e){return"string"==typeof e}var p=Math.abs,u=String.prototype.toLowerCase,l=String.prototype.toUpperCase,d=String.prototype.replace,_=/e\+(\d)$/,h=/e-(\d)$/,f=/^(\d+)$/,g=/^(\d+)e/,w=/\.0$/,v=/\.0*e/,m=/(\..*[^0])0*e/;function b(e){var t,r,n=parseFloat(e.arg);if(!isFinite(n)){if(!i(e.arg))throw new Error("invalid floating-point number. Value: "+r);n=e.arg}switch(e.specifier){case"e":case"E":r=n.toExponential(e.precision);break;case"f":case"F":r=n.toFixed(e.precision);break;case"g":case"G":p(n)<1e-4?((t=e.precision)>0&&(t-=1),r=n.toExponential(t)):r=n.toPrecision(e.precision),e.alternate||(r=d.call(r,m,"$1e"),r=d.call(r,v,"e"),r=d.call(r,w,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return r=d.call(r,_,"e+0$1"),r=d.call(r,h,"e-0$1"),e.alternate&&(r=d.call(r,f,"$1."),r=d.call(r,g,"$1.e")),n>=0&&e.sign&&(r=e.sign+r),r=e.specifier===l.call(e.specifier)?l.call(r):u.call(r)}function k(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function y(e,t,i){var r=t-e.length;return r<0?e:e=i?e+k(r):k(r)+e}var x=String.fromCharCode,S=isNaN,E=Array.isArray;function I(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function q(e){var t,i,r,a,s,p,u,l,d;if(!E(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(p="",u=1,l=0;l<e.length;l++)if(c(r=e[l]))p+=r;else{if(t=void 0!==r.precision,!(r=I(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+l+"`. Value: `"+r+"`.");for(r.mapping&&(u=r.mapping),i=r.flags,d=0;d<i.length;d++)switch(a=i.charAt(d)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+a)}if("*"===r.width){if(r.width=parseInt(arguments[u],10),u+=1,S(r.width))throw new TypeError("the argument for * width at position "+u+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[u],10),u+=1,S(r.precision))throw new TypeError("the argument for * precision at position "+u+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[u],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=o(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!S(r.arg)){if((s=parseInt(r.arg,10))<0||s>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=S(s)?String(r.arg):x(s)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=b(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=n(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=y(r.arg,r.width,r.padRight)),p+=r.arg||"",u+=1}return p}var L=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function C(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function R(e){var t,i,r,n;for(i=[],n=0,r=L.exec(e);r;)(t=e.slice(n,L.lastIndex-r[0].length)).length&&i.push(t),i.push(C(r)),n=L.lastIndex,r=L.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function V(e){return"string"==typeof e}function F(e){var t,i;if(!V(e))throw new TypeError(F("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[R(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return q.apply(null,t)}var $,W=Object.prototype,T=W.toString,A=W.__defineGetter__,N=W.__defineSetter__,O=W.__lookupGetter__,j=W.__lookupSetter__;$=function(){try{return e({},"x",{}),!0}catch(e){return!1}}()?t:function(e,t,i){var r,n,a,s;if("object"!=typeof e||null===e||"[object Array]"===T.call(e))throw new TypeError(F("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof i||null===i||"[object Array]"===T.call(i))throw new TypeError(F("invalid argument. Property descriptor must be an object. Value: `%s`.",i));if((n="value"in i)&&(O.call(e,t)||j.call(e,t)?(r=e.__proto__,e.__proto__=W,delete e[t],e[t]=i.value,e.__proto__=r):e[t]=i.value),a="get"in i,s="set"in i,n&&(a||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return a&&A&&A.call(e,t,i.get),s&&N&&N.call(e,t,i.set),e};var P=$;function D(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var i=function e(){if(this instanceof e){var i=[null];i.push.apply(i,arguments);var r=Function.bind.apply(t,i);return new r}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(i,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),i}var G=D(Object.freeze({__proto__:null,default:()=>()=>{}})),Z="function"==typeof Object.defineProperty?Object.defineProperty:null,Q=Object.defineProperty;function U(e){return"number"==typeof e}function B(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function X(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+B(n):B(n)+e,r&&(e="-"+e)),e}var z=String.prototype.toLowerCase,M=String.prototype.toUpperCase;function H(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!U(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=X(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=X(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===M.call(e.specifier)?M.call(i):z.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function J(e){return"string"==typeof e}var K=Math.abs,Y=String.prototype.toLowerCase,ee=String.prototype.toUpperCase,te=String.prototype.replace,ie=/e\+(\d)$/,re=/e-(\d)$/,ne=/^(\d+)$/,ae=/^(\d+)e/,se=/\.0$/,oe=/\.0*e/,ce=/(\..*[^0])0*e/;function pe(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!U(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":K(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=te.call(i,ce,"$1e"),i=te.call(i,oe,"e"),i=te.call(i,se,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=te.call(i,ie,"e+0$1"),i=te.call(i,re,"e-0$1"),e.alternate&&(i=te.call(i,ne,"$1."),i=te.call(i,ae,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===ee.call(e.specifier)?ee.call(i):Y.call(i)}function ue(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function le(e,t,i){var r=t-e.length;return r<0?e:e=i?e+ue(r):ue(r)+e}var de=String.fromCharCode,_e=isNaN,he=Array.isArray;function fe(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function ge(e){var t,i,r,n,a,s,o,c,p;if(!he(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(J(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=fe(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,_e(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,_e(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=H(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!_e(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=_e(a)?String(r.arg):de(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=pe(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=X(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=le(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var we=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function ve(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function me(e){var t,i,r,n;for(i=[],n=0,r=we.exec(e);r;)(t=e.slice(n,we.lastIndex-r[0].length)).length&&i.push(t),i.push(ve(r)),n=we.lastIndex,r=we.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function be(e){return"string"==typeof e}function ke(e){var t,i;if(!be(e))throw new TypeError(ke("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[me(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return ge.apply(null,t)}var ye,xe=Object.prototype,Se=xe.toString,Ee=xe.__defineGetter__,Ie=xe.__defineSetter__,qe=xe.__lookupGetter__,Le=xe.__lookupSetter__;ye=function(){try{return Z({},"x",{}),!0}catch(e){return!1}}()?Q:function(e,t,i){var r,n,a,s;if("object"!=typeof e||null===e||"[object Array]"===Se.call(e))throw new TypeError(ke("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof i||null===i||"[object Array]"===Se.call(i))throw new TypeError(ke("invalid argument. Property descriptor must be an object. Value: `%s`.",i));if((n="value"in i)&&(qe.call(e,t)||Le.call(e,t)?(r=e.__proto__,e.__proto__=xe,delete e[t],e[t]=i.value,e.__proto__=r):e[t]=i.value),a="get"in i,s="set"in i,n&&(a||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return a&&Ee&&Ee.call(e,t,i.get),s&&Ie&&Ie.call(e,t,i.set),e};var Ce=ye;function Re(e,t,i){Ce(e,t,{configurable:!1,enumerable:!1,writable:!1,value:i})}var Ve="function"==typeof Object.defineProperty?Object.defineProperty:null,Fe=Object.defineProperty;function $e(e){return"number"==typeof e}function We(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function Te(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+We(n):We(n)+e,r&&(e="-"+e)),e}var Ae=String.prototype.toLowerCase,Ne=String.prototype.toUpperCase;function Oe(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!$e(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=Te(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=Te(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===Ne.call(e.specifier)?Ne.call(i):Ae.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function je(e){return"string"==typeof e}var Pe=Math.abs,De=String.prototype.toLowerCase,Ge=String.prototype.toUpperCase,Ze=String.prototype.replace,Qe=/e\+(\d)$/,Ue=/e-(\d)$/,Be=/^(\d+)$/,Xe=/^(\d+)e/,ze=/\.0$/,Me=/\.0*e/,He=/(\..*[^0])0*e/;function Je(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!$e(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":Pe(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=Ze.call(i,He,"$1e"),i=Ze.call(i,Me,"e"),i=Ze.call(i,ze,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=Ze.call(i,Qe,"e+0$1"),i=Ze.call(i,Ue,"e-0$1"),e.alternate&&(i=Ze.call(i,Be,"$1."),i=Ze.call(i,Xe,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===Ge.call(e.specifier)?Ge.call(i):De.call(i)}function Ke(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function Ye(e,t,i){var r=t-e.length;return r<0?e:e=i?e+Ke(r):Ke(r)+e}var et=String.fromCharCode,tt=isNaN,it=Array.isArray;function rt(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function nt(e){var t,i,r,n,a,s,o,c,p;if(!it(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(je(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=rt(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,tt(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,tt(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=Oe(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!tt(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=tt(a)?String(r.arg):et(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=Je(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=Te(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=Ye(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var at=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function st(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function ot(e){var t,i,r,n;for(i=[],n=0,r=at.exec(e);r;)(t=e.slice(n,at.lastIndex-r[0].length)).length&&i.push(t),i.push(st(r)),n=at.lastIndex,r=at.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function ct(e){return"string"==typeof e}function pt(e){var t,i;if(!ct(e))throw new TypeError(pt("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[ot(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return nt.apply(null,t)}var ut,lt=Object.prototype,dt=lt.toString,_t=lt.__defineGetter__,ht=lt.__defineSetter__,ft=lt.__lookupGetter__,gt=lt.__lookupSetter__;ut=function(){try{return Ve({},"x",{}),!0}catch(e){return!1}}()?Fe:function(e,t,i){var r,n,a,s;if("object"!=typeof e||null===e||"[object Array]"===dt.call(e))throw new TypeError(pt("invalid argument. First argument must be an object. Value: `%s`.",e));if("object"!=typeof i||null===i||"[object Array]"===dt.call(i))throw new TypeError(pt("invalid argument. Property descriptor must be an object. Value: `%s`.",i));if((n="value"in i)&&(ft.call(e,t)||gt.call(e,t)?(r=e.__proto__,e.__proto__=lt,delete e[t],e[t]=i.value,e.__proto__=r):e[t]=i.value),a="get"in i,s="set"in i,n&&(a||s))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return a&&_t&&_t.call(e,t,i.get),s&&ht&&ht.call(e,t,i.set),e};var wt=ut,vt=Boolean;function mt(e){return"number"==typeof e}function bt(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function kt(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+bt(n):bt(n)+e,r&&(e="-"+e)),e}var yt=String.prototype.toLowerCase,xt=String.prototype.toUpperCase;function St(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!mt(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=kt(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=kt(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===xt.call(e.specifier)?xt.call(i):yt.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function Et(e){return"string"==typeof e}var It=Math.abs,qt=String.prototype.toLowerCase,Lt=String.prototype.toUpperCase,Ct=String.prototype.replace,Rt=/e\+(\d)$/,Vt=/e-(\d)$/,Ft=/^(\d+)$/,$t=/^(\d+)e/,Wt=/\.0$/,Tt=/\.0*e/,At=/(\..*[^0])0*e/;function Nt(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!mt(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":It(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=Ct.call(i,At,"$1e"),i=Ct.call(i,Tt,"e"),i=Ct.call(i,Wt,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=Ct.call(i,Rt,"e+0$1"),i=Ct.call(i,Vt,"e-0$1"),e.alternate&&(i=Ct.call(i,Ft,"$1."),i=Ct.call(i,$t,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===Lt.call(e.specifier)?Lt.call(i):qt.call(i)}function Ot(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function jt(e,t,i){var r=t-e.length;return r<0?e:e=i?e+Ot(r):Ot(r)+e}var Pt=String.fromCharCode,Dt=isNaN,Gt=Array.isArray;function Zt(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function Qt(e){var t,i,r,n,a,s,o,c,p;if(!Gt(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(Et(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=Zt(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,Dt(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,Dt(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=St(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!Dt(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=Dt(a)?String(r.arg):Pt(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=Nt(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=kt(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=jt(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var Ut=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function Bt(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function Xt(e){var t,i,r,n;for(i=[],n=0,r=Ut.exec(e);r;)(t=e.slice(n,Ut.lastIndex-r[0].length)).length&&i.push(t),i.push(Bt(r)),n=Ut.lastIndex,r=Ut.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function zt(e){return"string"==typeof e}function Mt(e){var t,i;if(!zt(e))throw new TypeError(Mt("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[Xt(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return Qt.apply(null,t)}function Ht(e){return"string"==typeof e}var Jt="function"==typeof Symbol&&"symbol"==typeof Symbol("foo");function Kt(){return Jt&&"symbol"==typeof Symbol.toStringTag}var Yt=Object.prototype.toString,ei=Object.prototype.hasOwnProperty,ti="function"==typeof Symbol?Symbol:void 0,ii="function"==typeof ti?ti.toStringTag:"",ri=Kt()?function(e){var t,i,r,n,a;if(null==e)return Yt.call(e);i=e[ii],a=ii,t=null!=(n=e)&&ei.call(n,a);try{e[ii]=void 0}catch(t){return Yt.call(e)}return r=Yt.call(e),t?e[ii]=i:delete e[ii],r}:function(e){return Yt.call(e)},ni=String.prototype.valueOf,ai=Kt();function si(e){return"object"==typeof e&&(e instanceof String||(ai?function(e){try{return ni.call(e),!0}catch(e){return!1}}(e):"[object String]"===ri(e)))}function oi(e){return Ht(e)||si(e)}function ci(e){return"number"==typeof e}function pi(e){var t,i="";for(t=0;t<e;t++)i+="0";return i}function ui(e,t,i){var r=!1,n=t-e.length;return n<0||(function(e){return"-"===e[0]}(e)&&(r=!0,e=e.substr(1)),e=i?e+pi(n):pi(n)+e,r&&(e="-"+e)),e}Re(oi,"isPrimitive",Ht),Re(oi,"isObject",si);var li=String.prototype.toLowerCase,di=String.prototype.toUpperCase;function _i(e){var t,i,r;switch(e.specifier){case"b":t=2;break;case"o":t=8;break;case"x":case"X":t=16;break;default:t=10}if(i=e.arg,r=parseInt(i,10),!isFinite(r)){if(!ci(i))throw new Error("invalid integer. Value: "+i);r=0}return r<0&&("u"===e.specifier||10!==t)&&(r=4294967295+r+1),r<0?(i=(-r).toString(t),e.precision&&(i=ui(i,e.precision,e.padRight)),i="-"+i):(i=r.toString(t),r||e.precision?e.precision&&(i=ui(i,e.precision,e.padRight)):i="",e.sign&&(i=e.sign+i)),16===t&&(e.alternate&&(i="0x"+i),i=e.specifier===di.call(e.specifier)?di.call(i):li.call(i)),8===t&&e.alternate&&"0"!==i.charAt(0)&&(i="0"+i),i}function hi(e){return"string"==typeof e}var fi=Math.abs,gi=String.prototype.toLowerCase,wi=String.prototype.toUpperCase,vi=String.prototype.replace,mi=/e\+(\d)$/,bi=/e-(\d)$/,ki=/^(\d+)$/,yi=/^(\d+)e/,xi=/\.0$/,Si=/\.0*e/,Ei=/(\..*[^0])0*e/;function Ii(e){var t,i,r=parseFloat(e.arg);if(!isFinite(r)){if(!ci(e.arg))throw new Error("invalid floating-point number. Value: "+i);r=e.arg}switch(e.specifier){case"e":case"E":i=r.toExponential(e.precision);break;case"f":case"F":i=r.toFixed(e.precision);break;case"g":case"G":fi(r)<1e-4?((t=e.precision)>0&&(t-=1),i=r.toExponential(t)):i=r.toPrecision(e.precision),e.alternate||(i=vi.call(i,Ei,"$1e"),i=vi.call(i,Si,"e"),i=vi.call(i,xi,""));break;default:throw new Error("invalid double notation. Value: "+e.specifier)}return i=vi.call(i,mi,"e+0$1"),i=vi.call(i,bi,"e-0$1"),e.alternate&&(i=vi.call(i,ki,"$1."),i=vi.call(i,yi,"$1.e")),r>=0&&e.sign&&(i=e.sign+i),i=e.specifier===wi.call(e.specifier)?wi.call(i):gi.call(i)}function qi(e){var t,i="";for(t=0;t<e;t++)i+=" ";return i}function Li(e,t,i){var r=t-e.length;return r<0?e:e=i?e+qi(r):qi(r)+e}var Ci=String.fromCharCode,Ri=isNaN,Vi=Array.isArray;function Fi(e){var t={};return t.specifier=e.specifier,t.precision=void 0===e.precision?1:e.precision,t.width=e.width,t.flags=e.flags||"",t.mapping=e.mapping,t}function $i(e){var t,i,r,n,a,s,o,c,p;if(!Vi(e))throw new TypeError("invalid argument. First argument must be an array. Value: `"+e+"`.");for(s="",o=1,c=0;c<e.length;c++)if(hi(r=e[c]))s+=r;else{if(t=void 0!==r.precision,!(r=Fi(r)).specifier)throw new TypeError("invalid argument. Token is missing `specifier` property. Index: `"+c+"`. Value: `"+r+"`.");for(r.mapping&&(o=r.mapping),i=r.flags,p=0;p<i.length;p++)switch(n=i.charAt(p)){case" ":r.sign=" ";break;case"+":r.sign="+";break;case"-":r.padRight=!0,r.padZeros=!1;break;case"0":r.padZeros=i.indexOf("-")<0;break;case"#":r.alternate=!0;break;default:throw new Error("invalid flag: "+n)}if("*"===r.width){if(r.width=parseInt(arguments[o],10),o+=1,Ri(r.width))throw new TypeError("the argument for * width at position "+o+" is not a number. Value: `"+r.width+"`.");r.width<0&&(r.padRight=!0,r.width=-r.width)}if(t&&"*"===r.precision){if(r.precision=parseInt(arguments[o],10),o+=1,Ri(r.precision))throw new TypeError("the argument for * precision at position "+o+" is not a number. Value: `"+r.precision+"`.");r.precision<0&&(r.precision=1,t=!1)}switch(r.arg=arguments[o],r.specifier){case"b":case"o":case"x":case"X":case"d":case"i":case"u":t&&(r.padZeros=!1),r.arg=_i(r);break;case"s":r.maxWidth=t?r.precision:-1;break;case"c":if(!Ri(r.arg)){if((a=parseInt(r.arg,10))<0||a>127)throw new Error("invalid character code. Value: "+r.arg);r.arg=Ri(a)?String(r.arg):Ci(a)}break;case"e":case"E":case"f":case"F":case"g":case"G":t||(r.precision=6),r.arg=Ii(r);break;default:throw new Error("invalid specifier: "+r.specifier)}r.maxWidth>=0&&r.arg.length>r.maxWidth&&(r.arg=r.arg.substring(0,r.maxWidth)),r.padZeros?r.arg=ui(r.arg,r.width||r.precision,r.padRight):r.width&&(r.arg=Li(r.arg,r.width,r.padRight)),s+=r.arg||"",o+=1}return s}var Wi=/%(?:([1-9]\d*)\$)?([0 +\-#]*)(\*|\d+)?(?:(\.)(\*|\d+)?)?[hlL]?([%A-Za-z])/g;function Ti(e){var t={mapping:e[1]?parseInt(e[1],10):void 0,flags:e[2],width:e[3],precision:e[5],specifier:e[6]};return"."===e[4]&&void 0===e[5]&&(t.precision="1"),t}function Ai(e){var t,i,r,n;for(i=[],n=0,r=Wi.exec(e);r;)(t=e.slice(n,Wi.lastIndex-r[0].length)).length&&i.push(t),i.push(Ti(r)),n=Wi.lastIndex,r=Wi.exec(e);return(t=e.slice(n)).length&&i.push(t),i}function Ni(e){return"string"==typeof e}function Oi(e){var t,i;if(!Ni(e))throw new TypeError(Oi("invalid argument. First argument must be a string. Value: `%s`.",e));for(t=[Ai(e)],i=1;i<arguments.length;i++)t.push(arguments[i]);return $i.apply(null,t)}var ji=/[-\/\\^$*+?.()|[\]{}]/g;function Pi(e){var t,i;if(!Ht(e))throw new TypeError(Oi("invalid argument. Must provide a regular expression string. Value: `%s`.",e));if("/"===e[0])for(i=e.length-1;i>=0&&"/"!==e[i];i--);return void 0===i||i<=0?e.replace(ji,"\\$&"):(t=(t=e.substring(1,i)).replace(ji,"\\$&"),e=e[0]+t+e.substring(i))}function Di(e,t,i){return e.replace(t,i)}function Gi(){}function Zi(e){throw e}function Qi(){return{comment:"",delimiter:",",doublequote:!0,escape:"",ltrim:!1,maxRows:1e308,newline:"\r\n",onClose:Gi,onColumn:Gi,onComment:null,onError:Zi,onRow:Gi,onSkip:null,onWarn:null,quote:'"',quoting:!0,rowBuffer:[],rtrim:!1,skip:"",skipBlankRows:!1,skipRow:null,strict:!0,trimComment:!0,whitespace:[" "]}}var Ui=["closed","comment","escape","error","field","init","invalid_quote_end","quote_end","quoted_escape","quoted_field","skip","skipped_comment","skipped_escape","skipped_field","skipped_invalid_quote_end","skipped_quote_end","skipped_quoted_escape","skipped_quoted_field"],Bi=function(){var e,t;for(e={},t=0;t<Ui.length;t++)e[Ui[t]]=t;return e}(),Xi=Bi.closed,zi=G("state:comment"),Mi=Bi.init,Hi=Bi.error;function Ji(e,t){return e<t?t:e}var Ki=G("state:escape"),Yi=Bi.error,er=Bi.field,tr=G("state:field"),ir=Bi.escape,rr=Bi.field,nr=Bi.init,ar=Bi.quoted_field,sr=G("state:init"),or=Bi.comment,cr=Bi.field,pr=Bi.escape,ur=Bi.init,lr=Bi.quoted_field,dr=Bi.skip,_r=G("state:invalid_quote_end"),hr=Bi.error,fr=Bi.field,gr=Bi.init;function wr(e,t){e._isWhitespace(e._qidx+1,e._cursor)?e._raiseWarning("INVALID_CLOSING_QUOTE")._rewind(e._cursor-e._qidx)._changeState(t):(_r("Error."),e._setErrorState("INVALID_CLOSING_QUOTE")._changeState(hr))}var vr=G("state:quote_end"),mr=Bi.error,br=Bi.field,kr=Bi.init,yr=Bi.invalid_quote_end,xr=Bi.quoted_field,Sr=G("state:quoted_escape"),Er=Bi.error,Ir=Bi.quoted_field,qr=G("state:quoted_field"),Lr=Bi.quote_end,Cr=Bi.quoted_escape,Rr=G("state:skip"),Vr=Bi.init,Fr=Bi.skip,$r=Bi.skipped_comment,Wr=Bi.skipped_field,Tr=Bi.skipped_escape,Ar=Bi.skipped_quoted_field,Nr=G("state:skipped_comment"),Or=Bi.init,jr=G("state:skipped_escape"),Pr=Bi.skipped_field,Dr=G("state:skipped_field"),Gr=Bi.init,Zr=Bi.skipped_escape,Qr=Bi.skipped_field,Ur=Bi.skipped_quoted_field,Br=G("state:skipped_invalid_quote_end"),Xr=Bi.skipped_field,zr=Bi.init,Mr=G("state:skipped_quote_end"),Hr=Bi.init,Jr=Bi.skipped_field,Kr=Bi.skipped_invalid_quote_end,Yr=Bi.skipped_quoted_field,en=G("state:skipped_quoted_escape"),tn=Bi.skipped_quoted_field,rn=G("state:skipped_quoted_field"),nn=Bi.skipped_quote_end,an=Bi.skipped_quoted_escape,sn={closed:function(e){return function(){e._changeState(Xi)}},comment:function(e){var t,i;return t=e._newlineLastIndex,i=e._newline,function(r){if(zi("Char: %s",r),r===i[t]&&e._scan(i,t))return zi("Newline."),void e._rewind(t)._changeState(Mi);e._push(r)}},escape:function(e){var t,i,r,n,a,s,o,c,p,u,l,d,_;return t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,r=e._commentLastIndex,p=e._comment,a=e._skipLastIndex,d=e._skip,n=e._escapeLastIndex,s=e._escapeLength,u=e._escape,l=e._strict,_=Ji(Ji(t,i),n),function(h){var f=e._cursor,g=e._eidx,w=f-g;return Ki("Char: %s",h),w===t&&h===o[t]&&e._scan(o,t)?(Ki("Delimiter."),void e._copyWithin(g-n,g+1,t)._rewind(s)._push(h)._changeState(er)):w===i&&h===c[i]&&e._scan(c,i)?(Ki("Newline."),void e._copyWithin(g-n,g+1,i)._rewind(s)._push(h)._changeState(er)):w===n&&h===u[n]&&e._scan(u,n)?(Ki("Escape."),void e._copyWithin(g-n,g+1,n)._rewind(s)._push(h)._changeState(er)):p&&f-r==0&&h===p[r]&&e._scan(p,r)?(Ki("Comment."),void e._copyWithin(g-r,g+1,r)._rewind(s)._push(h)._changeState(er)):d&&f-a==0&&h===d[a]&&e._scan(d,a)?(Ki("Skip."),void e._copyWithin(g-a,g+1,a)._rewind(s)._push(h)._changeState(er)):w>=_?l?(Ki("Error."),void e._setErrorState("INVALID_ESCAPE")._changeState(Yi)):(Ki("Escape sequence is not followed by a special character sequence."),void e._raiseWarning("INVALID_ESCAPE")._push(h)._changeState(er)):void e._push(h)}},error:function(e){return function(){e._changeState(Hi)}},field:function(e){var t,i,r,n,a,s,o,c,p,u;return r=e._escapeLastIndex,c=e._escape,n=e._quoteLastIndex,u=e._quote,t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,o=e._quoting,p=e._strict,function(l){var d=e._cursor-e._cidx+1;return tr("Char: %s",l),l===c[r]&&e._scan(c,r)?(tr("Escape."),void e._push(l)._changeState(ir)):d-n==0&&l===u[n]&&e._scan(u,n)?o?(tr("Quote."),void e._rewind(n)._changeState(ar)):void e._push(l):!1===p&&l===u[n]&&e._scan(u,n)?o&&e._isWhitespace(e._cidx,e._cursor-n)?(tr("Quote."),void e._raiseWarning("INVALID_OPENING_QUOTE")._rewind(d)._changeState(ar)):void e._push(l):l===a[t]&&e._scan(a,t)?(tr("Delimiter."),void e._rewind(t)._changeState(rr)):l===s[i]&&e._scan(s,i)?(tr("Newline."),void e._rewind(i)._changeState(nr)):void e._push(l)}},init:function(e){var t,i,r,n,a,s,o,c,p,u,l,d,_,h;return r=e._commentLastIndex,p=e._comment,s=e._skipLastIndex,h=e._skip,n=e._escapeLastIndex,l=e._escape,a=e._quoteLastIndex,_=e._quote,t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,u=e._quoting,d=e._strict,function(f){var g=e._cursor+1;return sr("Char: %s",f),p&&g-r==0&&f===p[r]&&e._scan(p,r)?(sr("Comment."),void e._rewind(r)._changeState(or)):h&&g-s==0&&f===h[s]&&e._scan(h,s)?(sr("Skip."),void e._rewind(s)._changeState(dr)):f===l[n]&&e._scan(l,n)?(sr("Escape."),void e._push(f)._changeState(pr)):g-a==0&&f===_[a]&&e._scan(_,a)?u?(sr("Quote."),void e._rewind(a)._changeState(lr)):void e._push(f):!1===d&&f===_[a]&&e._scan(_,a)?u&&e._isWhitespace(0,e._cursor-a)?(sr("Quote."),void e._raiseWarning("INVALID_OPENING_QUOTE")._rewind(g)._changeState(lr)):void e._push(f):f===o[t]&&e._scan(o,t)?(sr("Delimiter."),void e._rewind(t)._changeState(cr)):f===c[i]&&e._scan(c,i)?(sr("Newline."),void e._rewind(i)._changeState(ur)):void e._push(f)}},invalid_quote_end:function(e){var t,i,r,n;return t=e._delimiterLastIndex,r=e._delimiter,i=e._newlineLastIndex,n=e._newline,function(a){return _r("Char: %s",a),a===r[t]&&e._scan(r,t)?(_r("Delimiter."),e._rewind(t),void wr(e,fr)):a===n[i]&&e._scan(n,i)?(_r("Newline."),e._rewind(i),void wr(e,gr)):void e._push(a)}},quote_end:function(e){var t,i,r,n,a,s,o,c,p;return t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,r=e._quoteLastIndex,c=e._quote,n=e._doublequote,o=e._strict,p=Ji(Ji(t,i),r),function(u){return vr("Char: %s",u),n&&u===c[r]&&e._scan(c,r)?(vr("Double quote."),void e._push(u)._changeState(xr)):u===a[t]&&e._scan(a,t)?(vr("Delimiter."),void e._rewind(t)._changeState(br)):u===s[i]&&e._scan(s,i)?(vr("Newline."),void e._rewind(i)._changeState(kr)):e._cursor-e._qidx>=p?o?(vr("Error."),void e._setErrorState("INVALID_CLOSING_QUOTE")._changeState(mr)):(vr("Invalid closing quote."),void e._push(u)._changeState(yr)):void e._push(u)}},quoted_escape:function(e){var t,i,r,n,a;return i=e._quoteLastIndex,a=e._quote,t=e._escapeLastIndex,r=e._escapeLength,n=e._strict,function(s){var o=e._cursor,c=e._eidx,p=o-c;return Sr("Char: %s",s),p===i&&s===a[i]&&e._scan(a,i)?(Sr("Quote."),void e._copyWithin(c-t,c+1,i)._rewind(r)._push(s)._changeState(Ir)):p>=i?n?(Sr("Error."),void e._setErrorState("INVALID_QUOTED_ESCAPE")._changeState(Er)):(Sr("Escape sequence is not followed by a quote sequence."),void e._raiseWarning("INVALID_QUOTED_ESCAPE")._push(s)._changeState(Ir)):void e._push(s)}},quoted_field:function(e){var t,i,r,n,a;return t=e._escapeLastIndex,n=e._escape,i=e._quoteLastIndex,a=e._quote,r=e._doublequote,function(s){return qr("Char: %s",s),!1===r&&s===n[t]&&e._scan(n,t)?(qr("Escape."),void e._push(s)._changeState(Cr)):s===a[i]&&e._scan(a,i)?(qr("Quote."),void e._rewind(i)._changeState(Lr)):void e._push(s)}},skip:function(e){var t,i,r,n,a,s,o,c,p,u,l,d,_,h;return r=e._commentLastIndex,p=e._comment,s=e._skipLastIndex,h=e._skip,n=e._escapeLastIndex,l=e._escape,a=e._quoteLastIndex,_=e._quote,t=e._delimiterLastIndex,o=e._delimiter,i=e._newlineLastIndex,c=e._newline,u=e._quoting,d=e._strict,function(f){var g=e._cursor+1;return Rr("Char: %s",f),p&&g-r==0&&f===p[r]&&e._scan(p,r)?(Rr("Comment."),void e._push(f)._changeState($r)):h&&g-s==0&&f===h[s]&&e._scan(h,s)?(Rr("Skip."),void e._push(f)._changeState(Fr)):f===l[n]&&e._scan(l,n)?(Rr("Escape."),void e._push(f)._changeState(Tr)):g-a==0&&f===_[a]&&e._scan(_,a)?u?(Rr("Quote."),void e._push(f)._changeState(Ar)):void e._push(f):!1===d&&f===_[a]&&e._scan(_,a)?u&&e._isWhitespace(0,e._cursor-a)?(Rr("Quote."),void e._push(f)._changeState(Ar)):void e._push(f):f===o[t]&&e._scan(o,t)?(Rr("Delimiter."),void e._push(f)._changeState(Wr)):f===c[i]&&e._scan(c,i)?(Rr("Newline."),void e._rewind(i)._changeState(Vr)):void e._push(f)}},skipped_comment:function(e){var t,i;return t=e._newlineLastIndex,i=e._newline,function(r){if(Nr("Char: %s",r),r===i[t]&&e._scan(i,t))return Nr("Newline."),void e._rewind(t)._changeState(Or);e._push(r)}},skipped_escape:function(e){var t,i,r,n,a,s,o,c,p,u,l;return t=e._delimiterLastIndex,s=e._delimiter,i=e._newlineLastIndex,o=e._newline,r=e._commentLastIndex,c=e._comment,a=e._skipLastIndex,u=e._skip,n=e._escapeLastIndex,p=e._escape,l=Ji(Ji(t,i),n),function(d){var _=e._cursor,h=e._eidx,f=_-h;return jr("Char: %s",d),f===t&&d===s[t]&&e._scan(s,t)?(jr("Delimiter."),void e._push(d)._changeState(Pr)):f===i&&d===o[i]&&e._scan(o,i)?(jr("Newline."),void e._push(d)._changeState(Pr)):f===n&&d===p[n]&&e._scan(p,n)?(jr("Escape."),void e._push(d)._changeState(Pr)):c&&_-r==0&&d===c[r]&&e._scan(c,r)?(jr("Comment."),void e._push(d)._changeState(Pr)):u&&_-a==0&&d===u[a]&&e._scan(u,a)?(jr("Skip."),void e._push(d)._changeState(Pr)):f>=l?(jr("Normal character sequence."),void e._push(d)._changeState(Pr)):void e._push(d)}},skipped_field:function(e){var t,i,r,n,a,s,o,c,p,u;return r=e._escapeLastIndex,c=e._escape,n=e._quoteLastIndex,u=e._quote,t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,o=e._quoting,p=e._strict,function(l){var d=e._cursor-e._cidx+1;return Dr("Char: %s",l),l===c[r]&&e._scan(c,r)?(Dr("Escape."),void e._push(l)._changeState(Zr)):d-n==0&&l===u[n]&&e._scan(u,n)?(e._push(l),o?(Dr("Quote."),void e._changeState(Ur)):void 0):!1===p&&l===u[n]&&e._scan(u,n)?(e._push(l),o&&e._isWhitespace(e._cidx,e._cursor-n)?(Dr("Quote."),void e._changeState(Ur)):void 0):l===a[t]&&e._scan(a,t)?(Dr("Delimiter."),void e._push(l)._changeState(Qr)):l===s[i]&&e._scan(s,i)?(Dr("Newline."),void e._rewind(i)._changeState(Gr)):void e._push(l)}},skipped_invalid_quote_end:function(e){var t,i,r,n;return t=e._delimiterLastIndex,r=e._delimiter,i=e._newlineLastIndex,n=e._newline,function(a){return Br("Char: %s",a),a===r[t]&&e._scan(r,t)?(Br("Delimiter."),void e._push(a)._changeState(Xr)):a===n[i]&&e._scan(n,i)?(Br("Newline."),void e._rewind(i)._changeState(zr)):void e._push(a)}},skipped_quote_end:function(e){var t,i,r,n,a,s,o,c;return t=e._delimiterLastIndex,a=e._delimiter,i=e._newlineLastIndex,s=e._newline,r=e._quoteLastIndex,o=e._quote,n=e._doublequote,c=Ji(Ji(t,i),r),function(p){return Mr("Char: %s",p),n&&p===o[r]&&e._scan(o,r)?(Mr("Double quote."),void e._push(p)._changeState(Yr)):p===a[t]&&e._scan(a,t)?(Mr("Delimiter."),void e._push(p)._changeState(Jr)):p===s[i]&&e._scan(s,i)?(Mr("Newline."),void e._rewind(i)._changeState(Hr)):e._cursor-e._qidx>=c?(Mr("Invalid closing quote."),void e._push(p)._changeState(Kr)):void e._push(p)}},skipped_quoted_escape:function(e){var t,i;return t=e._quoteLastIndex,i=e._quote,function(r){var n=e._cursor,a=e._eidx,s=n-a;return en("Char: %s",r),s===t&&r===i[t]&&e._scan(i,t)?(en("Quote."),void e._push(r)._changeState(tn)):s>=t?(en("Escape sequence is not followed by a quote sequence."),void e._push(r)._changeState(tn)):void e._push(r)}},skipped_quoted_field:function(e){var t,i,r,n,a;return t=e._escapeLastIndex,n=e._escape,i=e._quoteLastIndex,a=e._quote,r=e._doublequote,function(s){return rn("Char: %s",s),!1===r&&s===n[t]&&e._scan(n,t)?(rn("Escape."),void e._push(s)._changeState(an)):s===a[i]&&e._scan(a,i)?(rn("Quote."),void e._push(s)._changeState(nn)):void e._push(s)}}};function on(e){var t,i;for(t=[],i=0;i<Ui.length;i++)t.push(sn[Ui[i]](e));return t}var cn,pn=G("parser"),un=Bi.closed,ln=Bi.comment,dn=Bi.error,_n=Bi.escape,hn=Bi.field,fn=Bi.init,gn=Bi.invalid_quote_end,wn=Bi.quote_end,vn=Bi.quoted_escape,mn=Bi.quoted_field,bn=Bi.skip;function kn(e){var t,i;for(t="(?:",i=0;i<e.length-1;i++)t+=Pi(e[i])+"|";return t+Pi(e[i])+")"}function yn(e){var t;return this instanceof yn?(e=e||{},t=Qi(),this._buffer=[],this._cursor=-1,this._cidx=0,this._qidx=-1,this._eidx=-1,this._rowBufferFLG=vt(e.rowBuffer),this._rowBuffer=e.rowBuffer||t.rowBuffer,this._col=0,this._row=0,this._line=0,this._commented=!1,this._skipped=!1,this._errname="",this._comment=e.comment||t.comment,this._delimiter=e.delimiter||t.delimiter,this._doublequote=void 0===e.doublequote?t.doublequote:e.doublequote,this._escape=e.escape||t.escape,this._ltrim=void 0===e.ltrim?t.ltrim:e.ltrim,this._maxRows=void 0===e.maxRows?t.maxRows:e.maxRows,this._newline=e.newline||t.newline,this._quote=e.quote||t.quote,this._quoting=void 0===e.quoting?t.quoting:e.quoting,this._rtrim=void 0===e.rtrim?t.rtrim:e.rtrim,this._skip=e.skip||t.skip,this._skipBlankRows=void 0===e.skipBlankRows?t.skipBlankRows:e.skipBlankRows,this._skipRow=e.skipRow||t.skipRow,this._strict=void 0===e.strict?t.strict:e.strict,this._trimComment=void 0===e.trimComment?t.trimComment:e.trimComment,this._whitespace=kn(e.whitespace||t.whitespace),this._reWhitespace=new RegExp("^"+this._whitespace+"*([\\S\\s]*?)"+this._whitespace+"*$"),this._reWhitespaceLeft=new RegExp("^"+this._whitespace+"*"),this._reWhitespaceRight=new RegExp(this._whitespace+"*$"),this._onClose=e.onClose||t.onClose,this._onColumn=e.onColumn||t.onColumn,this._onComment=e.onComment||t.onComment,this._onRow=e.onRow||t.onRow,this._onSkip=e.onSkip||t.onSkip,this._onError=e.onError||t.onError,this._onWarn=e.onWarn||t.onWarn,this._commentLength=this._comment.length,this._commentLastIndex=this._commentLength-1,this._delimiterLength=this._delimiter.length,this._delimiterLastIndex=this._delimiterLength-1,this._escapeLength=this._escape.length,this._escapeLastIndex=this._escapeLength-1,this._newlineLength=this._newline.length,this._newlineLastIndex=this._newlineLength-1,this._quoteLength=this._quote.length,this._quoteLastIndex=this._quoteLength-1,this._skipLength=this._skip.length,this._skipLastIndex=this._skipLength-1,this._skipRow&&this._skipRow(0,0)?(this._state=bn,this._skipped=!0):this._state=fn,this._states=on(this),this):arguments.length?new yn(e):new yn}Bi.skipped_comment,Bi.skipped_escape,Bi.skipped_field,Bi.skipped_invalid_quote_end,Bi.skipped_quote_end,Bi.skipped_quoted_escape,Bi.skipped_quoted_field,Re(yn.prototype,"_push",(function(e){var t=this._buffer;return this._cursor+=1,this._cursor>=t.length?(t.push(e),pn("Internal buffer size increased. Length: %d.",t.length)):t[this._cursor]=e,pn("Cursor: %d. Push: %s",this._cursor,e),this})),Re(yn.prototype,"_rewind",(function(e){return this._cursor-=e,pn("Rewind: %d. Cursor: %d.",e,this._cursor),this})),Re(yn.prototype,"_copyWithin",(function(e,t,i){var r,n;for(r=this._buffer,n=0;n<i;n++)r[e+n]=r[t+n];return this})),Re(yn.prototype,"_slice",(function(e,t){return this._buffer.slice(e,t+1).join("")})),Re(yn.prototype,"_isWhitespace",(function(e,t){return""===Di(this._slice(e,t),this._reWhitespaceLeft,"")})),Re(yn.prototype,"_reset",(function(){return this._col=0,this._cidx=0,this._qidx=-1,this._eidx=-1,this._skipRow&&this._skipRow(this._row,this._line)?(this._state=bn,this._skipped=!0):(this._state=fn,this._skipped=!1),this._commented=!1,this._cursor=-1,pn("Parser reset."),this})),Re(yn.prototype,"_setField",(function(e,t){var i=this._rowBuffer;return t>=i.length?(i.push(e),pn("Row buffer size increased. Length: %d.",i.length)):i[t]=e,this})),Re(yn.prototype,"_getField",(function(e,t){var i=this._slice(e,t);return this._ltrim?this._rtrim?Di(i,this._reWhitespace,"$1"):Di(i,this._reWhitespaceLeft,""):this._rtrim?Di(i,this._reWhitespaceRight,""):i})),Re(yn.prototype,"_getRow",(function(){return this._rowBufferFLG?this._rowBuffer:this._rowBuffer.slice(0,this._col)})),Re(yn.prototype,"_scan",(function(e,t){var i,r,n;for(i=this._buffer,r=this._cursor-t+1,n=0;n<t&&i[r+n]===e[n];n++);return n===t})),Re(yn.prototype,"_onField",(function(){var e=this._getField(this._cidx,this._cursor);return this._setField(e,this._col),this._onColumn(e,this._row,this._col,this._line),pn("Field. Line: %d. Row: %d. Column: %d. Value: %s",this._line,this._row,this._col,e),this._col+=1,this._cidx=this._cursor+1,this._qidx=-1,this._eidx=-1,this})),Re(yn.prototype,"_onRecord",(function(){var e;return e=this._getField(this._cidx,this._cursor),!this._skipBlankRows||0!==this._col||""!==e&&""!==Di(e,this._reWhitespaceLeft,"")?(this._setField(e,this._col),this._onColumn(e,this._row,this._col,this._line),this._col+=1,this._onRow(this._getRow(),this._row,this._col,this._line),pn("Record. Line: %d. Fields: %d.",this._line,this._col),this._row+=1,this._line+=1,this._reset(),this._row>=this._maxRows&&this._changeState(un),this):this._onSkippedRow()})),Re(yn.prototype,"_onCommentedRow",(function(){var e;return this._onComment?(e=this._slice(0,this._cursor),this._trimComment&&(e=Di(e,this._reWhitespaceLeft,"")),this._onComment(e,this._line),pn("Comment. Line: %d. Value: %s",this._line,e)):pn("Comment. Line: %d.",this._line),this._line+=1,this._reset(),this})),Re(yn.prototype,"_onSkippedRow",(function(){var e;return this._onSkip?(e=this._slice(0,this._cursor),this._onSkip(e,this._line),pn("Skipped row. Line: %d. Value: %s",this._line,e)):pn("Skipped row. Line: %d.",this._line),this._line+=1,this._reset(),this})),Re(yn.prototype,"_onClosingQuote",(function(){return this._qidx=this._cursor,this})),Re(yn.prototype,"_onEscape",(function(){return this._eidx=this._cursor,this})),Re(yn.prototype,"_createException",(function(e){var t;switch(e){case"INVALID_CLOSING_QUOTE":t=new Error(Mt("unexpected error. Encountered an invalid record. Field %d on line %d contains a closing quote which is not immediately followed by a delimiter or newline.",this._col,this._line));break;case"INVALID_OPENING_QUOTE":t=new Error(Mt("unexpected error. Encountered an invalid record. Field %d on line %d contains an opening quote which does not immediately follow a delimiter or newline.",this._col,this._line));break;case"INVALID_ESCAPE":t=new Error(Mt("unexpected error. Encountered an invalid record. Field %d on line %d contains an escape sequence which is not immediately followed by a special character sequence.",this._col,this._line));break;case"INVALID_QUOTED_ESCAPE":t=new Error(Mt("unexpected error. Encountered an invalid record. Field %d on line %d contains an escape sequence within a quoted field which is not immediately followed by a quote sequence.",this._col,this._line));break;case"CLOSED":t=new Error("invalid operation. Parser is unable to parse new chunks, as the parser has been closed. To parse new chunks, create a new parser instance.");break;default:t=new Error("invalid operation. Parser is in an unrecoverable error state. To parse new chunks, create a new parser instance.")}return t})),Re(yn.prototype,"_raiseWarning",(function(e){var t;return this._onWarn&&(t=this._createException(e),pn("Warning: %s",t.message),this._onWarn(t)),this})),Re(yn.prototype,"_raiseException",(function(){var e=this._createException(this._errname);return pn("Error: %s",e.message),this._onError(e),this})),Re(yn.prototype,"_changeState",(function(e){switch(pn("State transition: %s -> %s.",Ui[this._state],Ui[e]),e){case un:this._close();break;case ln:this._commented=!0;break;case dn:this._raiseException();break;case _n:this._onEscape();break;case hn:this._state!==_n&&this._onField();break;case fn:this._commented?this._onCommentedRow():this._skipped?this._onSkippedRow():this._onRecord();break;case gn:break;case wn:this._onClosingQuote();break;case vn:this._onEscape();break;case mn:break;case bn:this._skipped=!0}return this._state=e,this})),Re(yn.prototype,"_setErrorState",(function(e){return e?pn("Error: %s.",e):pn("Reset error state."),this._errname=e,this})),Re(yn.prototype,"_close",(function(){var e,t;return this.done?(this._setErrorState(un)._changeState(dn),this):(this._cursor>=0?(e=this._state)===fn||e===hn||e===wn?this._changeState(fn)._onClose():(this._col&&this._onRow(this._getRow(),this._row,this._col),t=this._slice(this._cidx,this._cursor),pn("Flush: %s",t),this._onClose(t)):this._onClose(),pn("Closed."),this)})),Re(yn.prototype,"next",(function(e){var t,i;if(pn("Chunk: %s",e),this.done)return this._setErrorState(un)._changeState(dn),this;for(t=this._states,i=0;i<e.length;i++)if(t[this._state](e[i]),this._state===un||this._state===dn)return this;return this})),Re(yn.prototype,"close",(function(){return this.done||this._changeState(un),this})),cn=yn.prototype,wt(cn,"done",{configurable:!1,enumerable:!1,get:function(){return this._state===un||this._state===dn}});var xn={};return function(e,t,i){P(e,t,{configurable:!1,enumerable:!0,writable:!1,value:i})}(xn,"parse",yn),xn},"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).base=t();
//# sourceMappingURL=browser.js.map
